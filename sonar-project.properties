# =============================================================================
# SonarQube/SonarCloud Configuration
# =============================================================================
# Documentation: https://docs.sonarcloud.io/advanced-setup/analysis-parameters/
# =============================================================================

# Project identification
sonar.projectKey=onelasha_Nedlia
sonar.organization=onelasha
sonar.projectName=Nedlia
sonar.projectVersion=0.1.0

# =============================================================================
# Source Configuration
# =============================================================================

# Source directories (comma-separated)
sonar.sources=nedlia-back-end,nedlia-front-end,nedlia-sdk,nedlia-plugin

# Test directories
sonar.tests=nedlia-back-end,nedlia-front-end,nedlia-sdk
sonar.test.inclusions=**/*test*/**,**/*spec*/**,**/test_*,**/*_test.*

# Exclusions from analysis
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/.nx/**,\
  **/.venv/**,\
  **/venv/**,\
  **/__pycache__/**,\
  **/coverage/**,\
  **/*.min.js,\
  **/*.min.css,\
  **/vendor/**,\
  **/migrations/**,\
  **/*.generated.*

# =============================================================================
# Language-Specific Settings
# =============================================================================

# TypeScript/JavaScript
sonar.typescript.tsconfigPaths=tsconfig.base.json,nedlia-front-end/portal/tsconfig.json
sonar.javascript.lcov.reportPaths=coverage/lcov.info,nedlia-front-end/portal/coverage/lcov.info,nedlia-sdk/javascript/coverage/lcov.info

# Python
sonar.python.version=3.11
sonar.python.coverage.reportPaths=coverage.xml,nedlia-back-end/api/coverage.xml,nedlia-back-end/workers/coverage.xml,nedlia-sdk/python/coverage.xml

# =============================================================================
# Quality Gate Settings
# =============================================================================

# Coverage thresholds (customize based on your standards)
# These are enforced in SonarCloud Quality Gate, not here

# =============================================================================
# SCM Settings
# =============================================================================
sonar.scm.provider=git
sonar.scm.forceReloadAll=false

# =============================================================================
# Encoding
# =============================================================================
sonar.sourceEncoding=UTF-8

# =============================================================================
# Duplication Detection
# =============================================================================
sonar.cpd.exclusions=\
  **/*test*/**,\
  **/*spec*/**,\
  **/migrations/**

# =============================================================================
# Issue Settings
# =============================================================================
# Ignore certain rules in specific paths
sonar.issue.ignore.multicriteria=e1,e2,e3

# Ignore "TODO" comments in test files
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*test*/**

# Ignore cognitive complexity in test files
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*test*/**

# Ignore hardcoded credentials rule in example/test files
sonar.issue.ignore.multicriteria.e3.ruleKey=*:S2068
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*example*/**,**/*test*/**,**/.env.example
